## Selecting plants used for sequencing as part of GLUE projects

### Description of repository

This repository contains code and data used to select plants for whole-genome resequencing as part of the Global Urban Evolution Project (GLUE). A general overview is as follows:

1. Extract DNA and generate per-sample Qubit concentrations for extractions. These dataframes are manually generated and included in this repository as [raw data](./data/raw/)
2. After cleaning the extraction data, select plants to be used for sequencing. Sequencing is happening in batches and the batches are loosely defined using the following names:
    - __LOW1__: Sequencing 10 urban and 10 rural samples from each of 25 samples (total N = 500) to 1X coverage.
    - __LOW2__: Sequencing an additional 3 urban and 3 rural samples from the an additional 25 cities not included in LOW1 to 1X coverage (total N = 150). 
    - __DEEP3__: Sequencing as many additional individuals as possible from the same 25 cities as LOW1 (up to 76) and 5 cities from LOW2 to 1X coverage. 30 cities. Total N = 1,927
3. After prepping the samples for sequencing (see [here](https://github.com/ness-lab/protocols/tree/master/libraryPrep_Illumina) for protocol), generate datasheet with per-sample post-library-prep Qubit concentrations. These are provided as [raw data](./data/raw/).
4. Use [custom script](https://github.com/ness-lab/illumina-pooling) to calculate per-sample volumes required to create equimolar dilutions and equimolar pools for sequencing. 
5. Clean up dilution datasheets and sequence!

### Using the repository

If you haven't cloned the [main repo](../), this repo can be independently cloned by running:

`git clone https://github.com/James-S-Santangelo/glue-sequencing-prep.git`

1. Open the Rproject in `RStudio` by navigating to `file` > `Open Project` and clicking on the `.Rproj` file in this repository. 
2. If you don't have the `renv` package installed, opening the project will bootstrap an installation. To install required packages, run `renv::restore()`
3. All results can be generated by executing [main.R](scripts/main.R). 
    - This script calls other scripts that do the heavy lifting. You can run the whole thing or only specific scripts (note that order sometimes matters).
    - Feel free to poke around the scripts to see what they do. They're reasonably well-documented. 